/*
 * JavaScript to allow dragging options to slots (using mouse down or touch) or tab through slots using keyboard.
 *
 * @module     qtype_harakat/answering
 * @copyright  2023 Meirza <meirza.arson@gmail.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("qtype_harakat/answering",["jquery"],(function($){function HarakatQuestion(inputname,containerQuestionId,containerId){this.containerId=containerId,this.inputname=inputname,this.containerQuestionId=containerQuestionId;document.getElementById(containerQuestionId).querySelectorAll("[class=harakat_yes]").forEach((answerLabel=>{answerLabel.addEventListener("click",(e=>{this.showHarakatOptions(e)}))}))}document.onclick=function(e){if("qtype_harakat_options"!==e.target.className&&"harakat_yes"!==e.target.className&&"option_letter"!==e.target.className)for(var myClasses=document.querySelectorAll(".qtype_harakat_options"),i=0,l=myClasses.length;i<l;i++)myClasses[i].style.display="none"},HarakatQuestion.prototype.showHarakatOptions=function(e){const coords=this.getCoords(e);window.console.log("#"+this.containerId+" .qtype_harakat_options"),$("#"+this.containerId+" .qtype_harakat_options").css({top:coords.top,left:coords.left,display:"block"}),this.displayOptions(e)},HarakatQuestion.prototype.displayOptions=function(letterTarget){const thisQ=this,letter=letterTarget.target.getAttribute("original"),a=answeringManager.harakat.split("|");var someDiv=document.createElement("div");for(let i=-1;i<a.length;i++){var someSpan=document.createElement("span");if(someSpan.className="option_letter",i>-1){var b=a[i].split("::");if(b.length>1)var txt=document.createTextNode(letter+String.fromCharCode(b[0])+String.fromCharCode(b[1]));else txt=document.createTextNode(letter+String.fromCharCode(a[i]))}else txt=document.createTextNode(letter);someSpan.append(txt),someSpan.addEventListener("click",(function(e){letterTarget.target.innerText=e.target.innerText,$("#"+thisQ.containerId+" .qtype_harakat_options").css("display","none"),thisQ.applyAnswer()})),someDiv.append(someSpan)}$("#"+this.containerId+" .qtype_harakat_options").html("").append(someDiv)},HarakatQuestion.prototype.getCoords=function(e){const rect=e.target.getBoundingClientRect();return{left:e.clientX-rect.left,top:e.clientY-rect.top}},HarakatQuestion.prototype.applyAnswer=function(){const question=document.getElementById(this.containerQuestionId);document.getElementById(this.inputname).value=question.innerText};var answeringManager={harakat:"",questions:{},init:function(inputname,containerQuestionId,containerId,harakat){answeringManager.questions[containerId]=new HarakatQuestion(inputname,containerQuestionId,containerId),answeringManager.harakat=harakat}};return{init:answeringManager.init}}));

//# sourceMappingURL=answering.min.js.map